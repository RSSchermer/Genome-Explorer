(function(){"use strict";var n;n=angular.module("glider",[]),n.directive("slider",["$document",function(n){return{template:'<span class="g-slider horizontal">\n<span class="slider" ng-click="sliderClick($event)">\n<span class="range" style="width: {{xPosition}}%;"></span>\n<span class="handle" style="left: {{xPosition}}%;" ng-mousedown="handleMouseDown($event)">\n<span class="value" ng-show="showValueInHandle">{{handleValue | intersperse}}</span>\n</span>\n</span>\n<span class="side dec">\n<span class="button" ng-click="step(-1)">-</span>\n<span class="bound-value">{{min() | intersperse}}</span>\n</span>\n<span class="side inc">\n<span class="button" ng-click="step(+1)">+</span>\n<span class="bound-value">{{max() | intersperse}}</span>\n</span>\n<span class="increments">\n<span ng-repeat="i in increments" class="i" style="left: {{i.offset}}%">\n{{ i.value | intersperse }}\n</span>\n</span>\n</span>',replace:!0,restrict:"E",scope:{value:"=",min:"&",max:"&"},link:function(e,a,s){var i,t,l,u,r,o,c,p,v,f;return i=function(n,e,a){return Math.min(Math.max(e,n),a)},u=function(){var n,a,i,t,l,u,r;if(null!=s.increments&&(i=e.min(),a=e.max(),isFinite(i)&&isFinite(a))){for(t=100/Math.abs(a-i),e.increments=[],e.snapValues=[i,a],r=s.increments.split(","),l=0,u=r.length;u>l;l++)n=r[l],n=parseInt(n),n>i&&a>n&&(e.increments.push({value:n,offset:(n-i)*t}),e.snapValues.push(n));return e.snapValues.sort(function(n,e){return n-e})}},o=a[0].getElementsByClassName("slider")[0],l=!1,e.xPosition=0,v=s.step||1,t=null!=s.deferUpdate,e.showValueInHandle=null!=s.showValueInHandle,null==e.value&&(e.value=e.min()),r=function(){var n;return n=e.max()-e.min(),0===n?e.xPosition=0:(e.xPosition=100*((e.value-e.min())/n),e.xPosition=i(e.xPosition,0,100)),e.showValueInHandle?e.handleValue=e.value:void 0},c=function(){var n,a,s,i,t,l,u;if(e.increments){for(s=1/0,u=e.snapValues,t=0,l=u.length;l>t;t++)i=u[t],a=Math.abs(i-e.value),s>a&&(s=a,n=i);isFinite(n)&&(e.value=n)}return r()},f=function(){return Math.round(((e.max()-e.min())*(e.xPosition/100)+e.min())/v)*v},e.$watch("min()",function(n){return u(),e.value<n&&(e.value=n),c()}),e.$watch("max()",function(n){return u(),e.value>n&&(e.value=n),c()}),e.$watch("value",function(n,a){return l?void 0:isFinite(n)?e.min()<=n&&n<=e.max()?r():e.value=i(n,e.min(),e.max()):e.value=isFinite(a)?a:e.min()}),e.step=function(n){var a,i;return i=function(n){var a;return a=e.value+n*v,e.min()<=a&&a<=e.max()?e.value=a:void 0},a=function(n){var a,s;return a=n>0?function(){var n,a,i,t;for(i=e.snapValues,t=[],n=0,a=i.length;a>n;n++)s=i[n],s>e.value&&t.push(s);return t}()[0]:function(){var n,a,i,t;for(i=e.snapValues,t=[],n=0,a=i.length;a>n;n++)s=i[n],s<e.value&&t.push(s);return t}().reverse()[0],null!=a?e.value=a:void 0},null!=s.increments?a(n):i(n)},e.sliderClick=function(n){var a,s,i;if(!angular.element(n.target).hasClass("handle"))return a=null!=(s=n.layerX)?s:null!=(i=n.originalEvent)?i.layerX:void 0,e.xPosition=100*(a/o.offsetWidth),e.value=f(),c()},p=null,e.handleMouseDown=function(n){return angular.element(n.target).hasClass("handle")?(p=n.pageX,l=!0):void 0},n.on("mousemove",function(n){var a;if(l)return a=n.pageX-p,e.xPosition+=100*(a/o.offsetWidth),e.xPosition<0?e.xPosition=0:e.xPosition>100?e.xPosition=100:p=n.pageX,t||(e.value=f()),e.showValueInHandle&&(e.handleValue=f()),e.$apply()}),n.on("mouseup",function(){return l?(t&&(e.value=f()),c(),e.$apply(),l=!1):void 0})}}}]),n.filter("intersperse",function(){return function(n){var e,a,s;if(null!=n)return n=n.toString(),e=function(n){return n.split("").reverse().join("")},a=e(n),a=a.replace(/(.{3})/g,"$1 "),s=e(a),s.trim()}})}).call(this);